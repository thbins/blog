# **서비스 메시(Service Mesh)란**

**서비스 메시**란 분산된 마이크로서비스 간의 통신을 **투명하게 제어·보안·관찰**하기 위한 **인프라 레벨의 네트워크 계층(추가 레이어)** 이다.

> 즉, 쿠버네티스가 Pod를 관리하는 것에 집중했다면, 서비스 메시는 Pod 간의 통신을 관리하는 것에 집중한다.

---
</br>

## **마이크로서비스 아키텍처와 통신 복잡성**

마이크로서비스 아키텍처는 수많은 서비스(Pod)로 구성될 수 있으며, 이 Pod들 간의 호출 관계는 복잡한 **N:N 통신 그래프**를 형성한다.
그러나 이러한 구조를 쿠버네티스 자체 기능만으로 지원하기에는 다음과 같은 한계가 있다.

| **영역** | **쿠버네티스 기본 기능** | **부족한 점** |
| --- | --- | --- |
| 통신 제어 | Service, NetworkPolicy 등 | 세밀한 트래픽 라우팅 불가 |
| 관찰성 | Pod 상태, 로그 확인 | 서비스 간 호출 추적 불가 |
| 보안 | 네트워크 정책 수준 | 서비스 간 암호화·인증 미지원 |

---
</br>

## **서비스 메시의 구성 요소**

서비스 메시는 일반적으로 **Control Plane**과 **Data Plane**의 두 계층으로 구성된다.

| **구성요소** | **설명** |
| --- | --- |
| **Data Plane** | 실제 트래픽을 처리하는 프록시 (예: Envoy). 각 Pod에 **사이드카(컨테이너)** 형태로 주입됨 |
| **Control Plane** | 프록시들의 설정을 중앙에서 관리하고, 정책/메트릭을 전달 (예: **Istiod**) |

### **트래픽 흐름 예시**

```
App A → (Envoy Proxy A) → (Envoy Proxy B) → App B
```

Pod 간 통신은 위와 같이 **모두 Envoy Proxy를 거쳐서 이루어지며**, 이 프록시는 중간에서 트래픽을 **모니터링·제어·암호화**한다.

---
</br>

## **서비스 메시가 제공하는 주요 기능**

| **기능** | **예시** |
| --- | --- |
| **트래픽 관리 (Traffic Management)** | Canary 배포, A/B 테스트, 요청 라우팅, Circuit Breaking |
| **보안 (Security)** | 서비스 간 mTLS, 인증·인가, 정책 기반 통신 제어 |
| **관찰성 (Observability)** | Telemetry, Tracing, Metrics, Logging 통합 수집 |
| **신뢰성 (Resilience)** | 재시도, 타임아웃, 장애 감지, 자동 우회(Route Failover) |